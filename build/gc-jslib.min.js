/*! gc-jslib 2015-08-05 22:29 */
!function(a,b,c){"use strict";if("performance"in a==!1&&(a.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in a.performance==!1){var d=Date.now();a.performance.timing&&a.performance.timing.navigationStart&&(d=a.performance.timing.navigationStart),a.performance.now=function(){return Date.now()-d}}a.requestAnimationFrame||(a.requestAnimationFrame=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(function(){b(a.performance.now())},1e3/60)})}(window,document),function(a){"use strict";function b(){}function c(b,c){var d=a.createEvent("Event");d.initEvent(b,!0,!1),c.dispatchEvent(d)}function d(b){a[j.enabled]=a[f.enabled],a[j.element]=a[f.element],c(j.events.change,b.target)}function e(a){c(j.events.error,a.target)}var f,g,h=!0,i={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},j=i.w3;for(g in i)if(i[g].enabled in a){f=i[g];break}return h&&(j.enabled in a||(f?(a.addEventListener(f.events.change,d,!1),a.addEventListener(f.events.error,e,!1),a[j.enabled]=a[f.enabled],a[j.element]=a[f.element],a[j.exit]=a[f.exit],Element.prototype[j.request]=function(){return this[f.request].apply(this,arguments)}):(Element.prototype[j.enabled]=b,Element.prototype[j.element]=b,Element.prototype[j.request]=b,Element.prototype[j.exit]=b))),f}(document),function(a,b,c){"use strict";var d={NotImplementedException:function(a){this.data=a,this.toString=function(){return"Exception: Not Implemented."}},IndexOutOfBoundsException:function(a){this.data=a,this.toString=function(){return"Exception: Index Out Of Bounds."}},WrongSignatureException:function(a){this.data=a,this.toString=function(){return"Exception: Wrong number or type of parameters."}},WrongDataException:function(a){this.data=a,this.toString=function(){return"Exception: Wrong data."}}};a.gc||(a.gc={},b=a.gc),b.exception=d}(window,window.gc),function(a,b,c){"use strict";var d="0.2.0",e={BOTTOM:0,BOTTOM_LEFT:1,BOTTOM_RIGHT:2,CENTER:3,LEFT:4,RIGHT:5,TOP:6,TOP_LEFT:7,TOP_RIGHT:8},f={};f.defineConstant=function(a,b,c){"object"==typeof c&&Object.freeze(c),Object.defineProperty(a,b,{configurable:!1,enumerable:!0,value:c,writable:!1})},f.compareVersions=function(a,c){function d(a,c){if(a=parseInt(a),c=parseInt(c),isNaN(a)||isNaN(c))throw new b.exception.WrongSignatureException("Parameters are not Number");return a-c}if("string"!=typeof a||"string"!=typeof c)throw new b.exception.WrongSignatureException("Version is not a String");a=a.split("."),c=c.split(".");var e,f,g=Math.min(a.length,c.length);for(e=0;g>e;e++)if(f=d(a[e],c[e]),0!==f)return f;return d(a.length,c.length)},f.isFunction=function(a){return"function"==typeof a},f.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},f.isString=function(a){return"string"==typeof a||a instanceof String},f.isArray=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},f.isPlainObject=function(a){return a!==c&&"[object Object]"===Object.prototype.toString.call(a)},f.isEmptyObject=function(a){return f.isPlainObject(a)?0===Object.keys(a).length:!1},f.forEach=function(a,c){var d,e;if("object"!=typeof a)throw b.exception.WrongSignatureException("objis not an Object or an Array");if(f.isArray(a))for(e=a.length,d=0;e>d&&c(a[d],d)!==!0;d++);else for(d in a)if(c(a[d],d)===!0)break},f.getSize=function(a){if("object"!=typeof a)throw b.exception.WrongSignatureException("obj needs to be an object or an array");return f.isArray(a)?a.length:Object.keys(a).length},f.extend=function a(){var b,c,d,e;if(arguments[0]===!0){for(b=arguments[1]||{},c=2;c<arguments.length;c++)if(e=arguments[c])for(d in e)e.hasOwnProperty(d)&&("object"==typeof e[d]?a(!0,b[d],e[d]):b[d]=e[d])}else for(b=arguments[0]||{},c=1;c<arguments.length;c++)if(arguments[c])for(d in arguments[c])arguments[c].hasOwnProperty(d)&&(b[d]=arguments[c][d]);return b},f.sleep=function(b){for(var c=a.performance.now();a.performance.now()-c<=b;);},f.alignPosition=function(a,c,d,f,g,h,i){if(arguments.length<3)throw new b.exception.WrongSignatureException("wrong number of parameters");switch(f=f||0,g=g||0,h=h||0,i=i||0,a){case e.BOTTOM:f+=c/2,g+=d-i;break;case e.BOTTOM_LEFT:f+=c+h,g+=d-i;break;case e.BOTTOM_RIGHT:f+=-c+h,g+=d-i;break;case e.CENTER:f+=c/2+h,g+=d/2-h;break;case e.LEFT:f+=c+h,g+=d/2-h;break;case e.RIGHT:f+=-c+h,g+=d/2-h;break;case e.TOP:f+=c/2+h,g+=i;break;case e.TOP_LEFT:f+=c+h,g+=i;break;case e.TOP_RIGHT:f+=-c+h,g+=i;break;default:throw b.exception.WrongDataException("align is not a value of gc.Align")}return{x:f,y:g}},a.gc||(a.gc={},b=a.gc),b.util=f,b.util.defineConstant(b.util,"VERSION",d),b.util.defineConstant(b,"Align",e)}(window,window.gc),function(a,b,c){"use strict";var d="1.1.0",e=function(a){var d,e,f,g=function(a){var c,g={strict:!1,canonize:!0,returnNullOnErrors:!0,optional:!1,validators:{},allowOverwriteValidators:!1};if(d=b.util.extend(g,a),e={},f={},b.util.isPlainObject(d.validators))for(c in d.validators)this.addValidator(c,d.validators[c])},h=function(a,b,c,d){d?e[a]=c:f[a]=b},i=function(a,e,f,g){var i,j=b.util.extend({},d,g);i=f===c&&j.optional?i={data:j.def!==c?j.def:c,valid:!0}:a(f,j),h(e,f,j.canonize?i.data:f,i.valid)},j=function(a,e,f,g){var i,j,k,l=!0,m=b.util.extend({},d,g);if(b.util.isArray(f))for(i=f.slice(),k=0;k<i.length;k++){if(j=a(i[k],m),!j.valid){l=!1;break}m.canonize&&(i[k]=j.data)}else f===c&&m.optional?(m.def!==c&&(i=m.def),l=!0):l=!1;h(e,f,i,l)},k=function(a,e,f,g){var i,j,k,l=!0,m=b.util.extend({},d,g);if(b.util.isPlainObject(f)){i=b.util.extend(!0,{},f);for(k in i){if(j=a(i[k],m),!j.valid){l=!1;break}m.canonize&&(i[k]=j.data)}}else f===c&&m.optional?(m.def!==c&&(i=m.def),l=!0):l=!1;h(e,f,i,l)};this.errors=function(){return b.util.isEmptyObject(f)?null:f},this.valid=function(a){var c,g=null;if("undefined"!=typeof a&&!b.util.isPlainObject(a))throw new b.exception.WrongParametersException("base needs to be a plain object if specified");if(!d.returnNullOnErrors||b.util.isEmptyObject(f))if(a){for(c in e)a[c]=e[c];g=a}else g=e;return g},this.reset=function(){return this.resetErrors(),this.resetValid(),this},this.resetErrors=function(){return f={},this},this.resetValid=function(){return e={},this},this.addValidator=function(a,c){if(!b.util.isString(a))throw new b.exception.WrongSignatureException("name is not a string");if(!b.util.isFunction(c))throw new b.exception.WrongSignatureException("validator is not a function");if(!d.allowOverwriteValidators){if(this[a])throw new b.exception.WrongDataException("The method "+a+" is already defined");if(this[a+"Array"])throw new b.exception.WrongDataException("The method "+a+"Array is already defined");if(this[a+"Object"])throw new b.exception.WrongDataException("The method "+a+"Object is already defined")}return this[a]=function(a,b,d){return i(c,a,b,d),this},this[a+"Array"]=function(a,b,d){return j(c,a,b,d),this},this[a+"Object"]=function(a,b,d){return k(c,a,b,d),this},this},g.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Validator=e,b.util.defineConstant(b.Validator,"VERSION",d)}(window,window.gc),function(a,b){"use strict";function c(a,b){var c=!!a,d=!b.strict||"boolean"==typeof a;return{data:c,valid:d}}function d(b,c){var d=parseInt(b),e=!isNaN(d)&&(!c.strict||a.util.isNumber(b));return{data:d,valid:e}}function e(b,c){var d=parseInt(b),e=!isNaN(d)&&(!c.strict||a.util.isNumber(b))&&b>=0;return{data:d,valid:e}}function f(b,c){var d=parseFloat(b),e=!isNaN(d)&&(!c.strict||a.util.isNumber(b));return{data:d,valid:e}}function g(b,c){var d=parseFloat(b),e=!isNaN(d)&&(!c.strict||a.util.isNumber(b))&&b>=0;return{data:d,valid:e}}function h(b,c){var d=String(b),e=null!=b&&(!c.strict||a.util.isString(b));return{data:d,valid:e}}function i(b,c){var d=String(b),e=null!=b&&(!c.strict||a.util.isString(b))&&b.length>0;return{data:d,valid:e}}function j(b,c){return{data:b,valid:a.util.isFunction(b)}}function k(b,c){if(!c||!a.util.isPlainObject(c.enumerated))throw new a.exception.WrongParametersException("options.enumerated is not an Object");var d,e=null,f=!1;for(d in c.enumerated)if(!c.strict&&b==c.enumerated[d]||c.strict&&b===c.enumerated[d]){e=c.enumerated[d],f=!0;break}return{data:e,valid:f}}function l(a,c){return{data:a,valid:a!==b}}function m(b,c){var d=null,e=!1;return a.util.isPlainObject(b)&&(r.reset().intPositive("x",b.x,{optional:!0}).intPositive("y",b.y,{optional:!0}).intPositive("width",b.width,{optional:!0}).intPositive("height",b.height,{optional:!0}).intPositive("centerX",b.centerX,{optional:!0}).intPositive("centerY",b.centerY,{optional:!0}).intPositive("time",b.time,{optional:!0}),e=!r.errors(),d=r.valid()),{data:d,valid:e}}function n(b,c){var d=null,e=!1;return a.util.isPlainObject(b)&&(r.reset().strNotEmpty("src",b.src).intPositive("size",b.size,{optional:!0}),e=!r.errors(),d=r.valid()),{data:d,valid:e}}function o(b,c){var d=null,e=!1;return a.util.isPlainObject(b)&&(r.reset().strNotEmpty("font",b.font,{optional:!0}).bool("fill",b.fill,{optional:!0}).strNotEmpty("fillStyle",b.fillStyle,{optional:!0}).bool("stroke",b.stroke,{optional:!0}).strNotEmpty("strokeStyle",b.strokeStyle,{optional:!0}).flt("lineMargin",b.lineMargin,{optional:!0}).intPositive("pause",b.pause,{optional:!0}),e=!r.errors(),d=r.valid()),{data:d,valid:e}}function p(b,c){var d=null,e=!1;return a.util.isPlainObject(b)?(r.reset().defined("texture",b.texture).intPositive("topLeftX",b.topLeftX).intPositive("topLeftY",b.topLeftY).intPositive("topLeftW",b.topLeftW).intPositive("topLeftH",b.topLeftH).intPositive("bottomRightX",b.bottomRightX).intPositive("bottomRightY",b.bottomRightY).intPositive("bottomRightW",b.bottomRightW).intPositive("bottomRightH",b.bottomRightH),e=!r.errors(),d=r.valid()):a.util.isArray(b)&&(9===b.length||10===b.length)&&(r.reset().defined("texture",b[0]).intPositive("topLeftX",b[1]).intPositive("topLeftY",b[2]).intPositive("topLeftW",b[3]).intPositive("topLeftH",b[4]).intPositive("bottomRightX",b[5]).intPositive("bottomRightY",b[6]).intPositive("bottomRightW",b[7]).intPositive("bottomRightH",b[8]),e=!r.errors(),d=r.valid()),{data:d,valid:e}}var q={bool:c,int:d,intPositive:e,flt:f,fltPositive:g,str:h,strNotEmpty:i,callback:j,enumerated:k,defined:l};a.validatorDefinitions={Animation:a.util.extend({animationFrame:m},q),FPS:q,ResourceManager:a.util.extend({resourceDefinition:n}),XHR:q,Text:a.util.extend({textStyle:o},q),Drawable:q,NinePatch:a.util.extend({ninePatchData:p},q)};var r=new a.Validator({validators:q})}(window.gc),function(a,b,c){"use strict";var d="0.1.0",e=[/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i],f={};a.gc||(a.gc={},b=a.gc),b.browser=f,b.util.defineConstant(b.browser,"VERSION",d),b.util.defineConstant(b.browser,"userAgent",navigator.userAgent||navigator.vendor||a.opera),b.util.defineConstant(b.browser,"isMobile",e[0].test(b.browser.userAgent)||e[1].test(b.browser.userAgent)),b.util.defineConstant(b.browser,"isOpera",!!a.opera||navigator.userAgent.indexOf(" OPR/")>=0),b.util.defineConstant(b.browser,"isFirefox","undefined"!=typeof InstallTrigger),b.util.defineConstant(b.browser,"isSafari",Object.prototype.toString.call(a.HTMLElement).indexOf("Constructor")>0),b.util.defineConstant(b.browser,"isChrome",!!a.chrome&&!b.browser.isOpera),b.util.defineConstant(b.browser,"isIE",!!document.documentMode)}(window,window.gc),function(a,b,c){"use strict";var d=2147483648,e=1103515245,f=12345,g="1.0.0",h=function(a){function b(a){c="undefined"==typeof a?parseInt(Math.random()*(d-1)):parseInt(a),g=c,h=0}var c,g,h;this.nextInt=function(a,b){switch(g=(e*g+f)%d,h++,arguments.length){case 0:return g;case 1:return Math.floor(g/d*a);case 2:return Math.floor(g/d*(b-a)+a);default:throw"Wrong number of arguments"}},this.nextFloat=function(a,b){switch(g=(e*g+f)%d,h++,arguments.length){case 0:return g/(d-1);case 1:return g*b;case 2:return g*(b-a)+a;default:throw"Wrong number of arguments"}},this.reset=function(){return b(c),this},this.getSeed=function(){return c},this.setSeed=function(a){return b(a),this},this.getState=function(){return h},this.setState=function(a){var b;for(h>a?this.reset():a-=h,b=0;a>b;b++)this.nextInt();return this},b.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.RNG=h,b.util.defineConstant(b.RNG,"VERSION",g)}(window,window.gc),function(a,b,c){"use strict";var d="1.0.0",e={PENDING:"PENDING",RESOLVED:"RESOLVED",REJECTED:"REJECTED"},f=function(){var a,d,g,h,i,j,k,l=function(f){a=e.PENDING,d=[],g=[],h=[],i=[],j={def:c,done:c,fail:c,progress:c},b.util.isFunction(f)&&f.call(this,j)};this.state=function(){return a},this.done=function(c){if(!b.util.isFunction(c))throw new b.exception.WrongSignatureException("callback is not a Function");return d.push(c),a===e.RESOLVED&&c.apply(null,k),this},this.fail=function(c){if(!b.util.isFunction(c))throw new b.exception.WrongSignatureException("callback is not a Function");return g.push(c),a===e.REJECTED&&c.apply(null,k),this},this.always=function(c){if(!b.util.isFunction(c))throw new b.exception.WrongSignatureException("callback is not a Function");return h.push(c),a!==e.PENDING&&c.apply(null,k),this},this.progress=function(a){if(!b.util.isFunction(a))throw new b.exception.WrongSignatureException("callback is not a Function");return i.push(a),this},this.then=function(a,c,d){if(a&&!b.util.isFunction(a))throw new b.exception.WrongSignatureException("done is not a Function");if(c&&!b.util.isFunction(c))throw new b.exception.WrongSignatureException("fail is not a Function");if(d&&!b.util.isFunction(d))throw new b.exception.WrongSignatureException("progress is not a Function");return j.def=new f(function(b){a&&(b.done=a),c&&(b.fail=c),d&&(b.progress=d)}),j.def.promise()},this.promise=function(a){var c={state:this.state,done:this.done,fail:this.fail,always:this.always,progress:this.progress,then:this.then,promise:this.promise};return null!=a?b.util.extend(a,c):c},this.reset=function(){a=e.PENDING,j.def&&j.def.reset()},this.resolve=function(){var b,c;if(a!==e.PENDING)return this;for(a=e.RESOLVED,k=arguments,j.done&&(k=[j.done.apply(null,arguments)]),b=0,c=d.length;c>b;b++)d[b].apply(null,k);for(b=0,c=h.length;c>b;b++)h[b].apply(null,k);return j.def&&j.def.resolve.apply(null,k),this},this.reject=function(){var b,c;if(a!==e.PENDING)return this;for(a=e.REJECTED,k=arguments,j.fail&&(k=[j.fail.apply(null,arguments)]),b=0,c=g.length;c>b;b++)g[b].apply(null,k);for(b=0,c=h.length;c>b;b++)h[b].apply(null,k);return j.def&&j.def.reject.apply(null,k),this},this.notify=function(){var b,c,d=arguments;if(a!==e.PENDING)return this;for(j.progress&&(d=[j.progress.apply(null,arguments)]),b=0,c=i.length;c>b;b++)i[b].apply(null,d);return j.def&&j.def.notify.apply(null,d),this},l.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Deferred=f,b.util.defineConstant(b.Deferred,"VERSION",d),b.util.defineConstant(b.Deferred,"State",e)}(window,window.gc),function(a,b,c){"use strict";var d=new b.Validator({validators:b.validatorDefinitions.XHR}),e="0.1.0",f={GET:"GET",POST:"POST",HEAD:"HEAD",PUT:"PUT",DELETE:"DELETE"},g=function(a,c){var e,g,h,i=function(a,c){var e={data:{},method:f.GET,timeout:3e4,async:!0};if(g=b.util.extend(e,c),delete e.data,!g.url)throw new b.exception.WrongDataException("URL is not specified");if(d.reset().enumerated("method",g.method,{enumerated:f}).bool("async",g.async).intPositive("timeout",g.timeout),d.errors())throw new b.exception.WrongDataException(d.errors());g=d.valid(),g.url=a,h=new b.Deferred,h.promise(this),j()},j=function(){e=new XMLHttpRequest,e.open(g.method,g.url,g.async),g.async&&g.timeout>0?e.timeout=g.timeout:e.timeout=0,e.onload=function(a){0===e.status||e.status>=200&&e.status<400?h.resolve(e,a):e.status>=100&&e.status<200?h.notify(e,a):h.reject(e,a)},e.onerror=function(a){h.reject(a)},e.ontimeout=function(a){};try{e.send()}catch(a){}};i.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.XHR=g,b.util.defineConstant(b.XHR,"VERSION",e),b.util.defineConstant(b.XHR,"Method",f)}(window,window.gc),function(a,b,c,d){"use strict";var e=new c.Validator({validators:c.validatorDefinitions.FPS}),f="1.0.0",g=function(a){function b(a){var b={updateDelay:1e3,update:d,font:"12px Arial",fillStyle:"#FFFF00",x:0,y:0,align:c.Align.TOP_LEFT};if(g=c.util.extend(b,a),e.reset().intPositive("updateDelay",g.updateDelay).callback("update",g.update,{optional:!0}).str("font",g.font).str("fillStyle",g.fillStyle).int("x",g.x).int("y",g.y).enumerated("align",g.align,{enumerated:c.Align}),e.errors())throw new c.exception.WrongDataException(e.errors());g=e.valid()}var f,g,h=0,i=0;this.option=function(a,b){switch(arguments.length){case 1:return g[a];case 2:return g[a]=b,this;default:throw"Wrong Parameters"}},this.update=function(a){return i++,a>h&&(h+=g.updateDelay,f=i,i=0,g.update&&g.update(f)),this},this.getFPS=function(){return f},this.draw=function(a){var b,d,e,h=a.fillStyle,i=a.font;return a.font=g.font,a.fillStyle=g.fillStyle,b=f+" fps",d=a.measureText(b),e=c.util.alignPosition(g.align,d.width,10,g.x,g.y,0,10),a.fillText(b,e.x,e.y),a.font=i,a.fillStyle=h,this},b.apply(this,arguments)};a.gc||(a.gc={},c=a.gc),c.FPS=g,c.util.defineConstant(c.FPS,"VERSION",f)}(window,document,window.gc),function(a,b,c){"use strict";var d=new b.Validator({validators:b.validatorDefinitions.ResourceManager}),e="1.0.0",f={IMAGE:0,FONT:1,AUDIO:2},g=function(){function a(a,b){q.notify(p/o,a,b),p===o&&q.resolve(p/o,a,b)}function e(b,c){c.tmp=new Image,c.tmp.onload=function(){p+=c.size,c.rsc=c.tmp,delete c.tmp,a(b,f.IMAGE)},c.tmp.src=c.src}function g(b,c){c.tmp=new Audio,c.tmp.oncanplaythrough=function(){p+=c.size,c.rsc=c.tmp,delete c.tmp,a(b,f.AUDIO)},c.tmp.src=c.src}function h(c,d,e){var g=new b.XHR(d.src);g.done(function(){p+=d.size,d.rsc=!0,delete d.tmp,a(c,f.FONT)}),d.tmp=!0}function i(a,b){var c,d;for(c in b)a[c]&&(o-=a[c].size,p-=a[c].size),d=b[c].size||1,a[c]={size:d,src:b[c].src},o+=a[c].size}function j(a,b){var c;for(c in a)a[c].rsc||a[c].tmp||b(c,a[c])}function k(a){if(d.reset().resourceDefinitionObject("data",a),d.errors())throw new b.exception.WrongDataException(d.errors())}var l,m,n,o,p,q,r=function(){l={},m={},n={},o=0,p=0,q=new b.Deferred,q.promise(this)};this.loadImages=function(a){return k(a),q.reset(),i(l,a),j(l,e),this},this.loadFonts=function(a){return k(a),q.reset(),i(m,a),j(m,h,f.FONT),this},this.loadAudios=function(a){return k(a),q.reset(),i(n,a),j(n,g),this},this.load=function(a){if(!b.util.isPlainObject(a))throw b.exception.WrongSignatureException("data is not an Object");return q.reset(),a[f.IMAGE]&&i(l,a[f.IMAGE]),a[f.FONT]&&i(m,a[f.FONT]),a[f.AUDIO]&&i(n,a[f.AUDIO]),a[f.IMAGE]&&j(l,e),a[f.FONT]&&j(m,h),a[f.AUDIO]&&j(n,g),this},this.getImage=function(a){return l[a]&&l[a].rsc?l[a].rsc:c},this.getAudio=function(a){return n[a]&&n[a].rsc?n[a].rsc:c},r.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.ResourceManager=g,b.util.defineConstant(b.ResourceManager,"VERSION",e),b.util.defineConstant(b.ResourceManager,"ResourceType",f)}(window,window.gc),function(a,b,c){"use strict";var d=new b.Validator({validators:b.validatorDefinitions.Drawable}),e="#0f0",f=1,g="#f00",h=2,i="0.2.1",j=function(a,c,i,j,k,l,m){function n(a,c,e,f,g,h,i){if(o=a,p=new b.Size2(c||a.width,e||a.height),q=new b.Point2(f||0,g||0),r=new b.Point2(h||0,i||0),d.reset().intPositive("width",p.width).intPositive("height",p.height).intPositive("offsetX",q.x).intPositive("offsetY",q.y).int("centerX",r.x).int("centerY",r.y),d.errors())throw new b.exception.WrongSignatureException(d.errors())}var o,p,q,r;this.draw=function(a){switch(arguments.length){case 3:a.drawImage(o,q.x,q.y,p.width,p.height,arguments[1]-r.x,arguments[2]-r.y,p.width,p.height);break;case 5:a.drawImage(o,q.x,q.y,p.width,p.height,arguments[1]-r.x*(arguments[3]/p.width),arguments[2]-r.y*(arguments[4]/p.height),arguments[3],arguments[4]);break;case 9:a.drawImage(o,q.x+arguments[1],q.y+arguments[2],Math.min(arguments[3],p.width-arguments[1]),Math.min(arguments[4],p.height-arguments[2]),arguments[5]-r.x*(arguments[7]/p.width),arguments[6]-r.y*(arguments[8]/p.height),arguments[7],arguments[8]);break;default:throw"Incorrect number of parameters"}return this},this.drawBounds=function(a){switch(a.strokeStyle=e,a.lineWidth=f,arguments.length){case 3:a.strokeRect(Math.round(arguments[1]-r.x)-f/2,Math.round(arguments[2]-r.y)-f/2,p.width+f,p.height+f);break;case 5:a.strokeRect(Math.round(arguments[1]-r.x*(arguments[3]/p.width))-f/2,Math.round(arguments[2]-r.y*(arguments[4]/p.height))-f/2,arguments[3],arguments[4]);break;case 9:a.strokeRect(Math.round(arguments[3]-r.x*(arguments[7]/p.width))-f/2,Math.round(arguments[4]-r.y*(arguments[8]/p.height))-f/2,arguments[7],arguments[8]);break;default:throw"Incorrect number of parameters"}return this},this.drawCenter=function(a){switch(a.fillStyle=g,arguments.length){case 3:case 5:a.fillRect(arguments[1]-h,arguments[2]-h,2*h+1,2*h+1);break;case 9:a.fillRect(arguments[5]-h,arguments[6]-h,2*h+1,2*h+1);break;default:throw"Incorrect number of parameters"}return this},this.setSize=function(a,b){return p.set.apply(p,arguments),this},this.getSize=function(){return p.get()},this.setOffset=function(a,b){return q.apply(q,arguments),this},this.getOffset=function(){return q.get()},this.setCenter=function(){switch(arguments.length){case 1:if(b.util.isPlainObject(arguments[0])){r.set(arguments[0]);break}switch(arguments[0]){case b.Align.BOTTOM:r.set(p.width/2,p.height);break;case b.Align.BOTTOM_LEFT:r.set(0,p.height);break;case b.Align.BOTTOM_RIGHT:r.set(p.width,p.height);break;case b.Align.CENTER:r.set(p.width/2,p.height/2);break;case b.Align.LEFT:r.set(0,p.height/2);break;case b.Align.RIGHT:r.set(p.width,p.height/2);break;case b.Align.TOP:r.set(p.width/2,0);break;case b.Align.TOP_LEFT:r.set(0,0);break;case b.Align.TOP_RIGHT:r.set(p.width,0);break;default:throw b.exception.WrongDataException("align is not a value of gc.Align")}break;case 2:r.set(arguments[0],arguments[1]);break;default:throw new b.exception.WrongSignatureException("Incorrect number of parameters")}return this},this.getCenter=function(){return r.get()},this.drawable=function(a){var c={draw:this.draw,drawBounds:this.drawBounds,drawCenter:this.drawCenter,setOffset:this.setOffset,getOffset:this.getOffset,setSize:this.setSize,getSize:this.getSize,setCenter:this.setCenter,getCenter:this.getCenter,drawable:this.drawable};return null!=a?b.util.extend(a,c):c},n.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Drawable=j,b.util.defineConstant(b.Drawable,"VERSION",i)}(window,window.gc),function(a,b,c){"use strict";function d(a){return a.setImageSmoothing=function(b){a.imageSmoothingEnabled!==c?a.imageSmoothingEnabled=b:a.webkitImageSmoothingEnabled!==c?a.webkitImageSmoothingEnabled=b:a.mozImageSmoothingEnabled!==c?a.mozImageSmoothingEnabled=b:a.msImageSmoothingEnabled!==c&&(a.msImageSmoothingEnabled=b)},a.draw=function(c,d,e,f,g,h,i,j,k){if(c instanceof b.TextureRegion)switch(arguments.length){case 3:a.drawImage(c.src,c.offsetX,c.offsetY,c.width,c.height,arguments[1]-c.centerX,arguments[2]-c.centerY,c.width,c.height);break;case 5:a.drawImage(c.src,c.offsetX,c.offsetY,c.width,c.height,arguments[1]-c.centerX*(arguments[3]/c.width),arguments[2]-c.centerY*(arguments[4]/c.height),arguments[3],arguments[4]);break;case 9:a.drawImage(c.src,c.offsetX+arguments[1],c.offsetY+arguments[2],Math.min(arguments[3],c.width-arguments[3]),Math.min(arguments[4],c.height-arguments[4]),arguments[5],arguments[6],arguments[7],arguments[8]);break;default:throw new b.exception.WrongSignatureException("Incorrect number of parameters")}else a.drawImage(c,d,e,f,g,h,i,j,k)},a}var e="0.2.0",f=function(a){function c(a){if(a||(a=document.createElement("canvas")),!a.getContext)throw new b.exception.NotImplementedException("canvas.getContext is not supported");e=a.getContext("2d")}var e;this.getContext=function(){return d(e)},this.getCanvas=function(){return e.canvas},this.setSize=function(){switch(arguments.length){case 1:this.width=arguments[0].width,this.height=arguments[0].height;break;case 2:this.width=arguments[0],this.height=arguments[1];break;default:throw new b.exception.WrongSignatureException("Incorrect number of parameters")}return this},this.getSize=function(){return{width:e.canvas.width,height:e.canvas.height}},c.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Canvas2D=f,b.util.defineConstant(b.Canvas2D,"VERSION",e)}(window,window.gc),function(a,b,c){"use strict";var d="0.3.0",e=function(){var a=function(a,b){1===arguments.length?(this.x=arguments[0].x||0,this.y=arguments[0].y||0):(this.x=a||0,this.y=b||0)};this.set=function(a,b){return this.x=a||0,this.y=b||0,this},this.get=function(){return{x:this.x,y:this.y}},this.move=function(a,b){return this.x+=a,this.y+=b,this},this.distance=function(a,b){var c=this.x-a,d=this.y-b;return Math.sqrt(c*c+d*d)},this.distance2=function(a,b){var c=this.x-a,d=this.y-b;return c*c+d*d},this.angleRad=function(a,b){var c;return c=Math.atan2(this.y-b,this.x-a),0>c?2*Math.PI+c:c},this.angle=function(a,b){var c;return c=Math.atan2(this.y-b,this.x-a),0>c&&(c=2*Math.PI+c),180*c/Math.PI},a.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Point2=e,b.util.defineConstant(b.Point2,"VERSION",d)}(window,window.gc),function(a,b,c){"use strict";var d="0.3.0",e=function(){var a=function(a,b){1===arguments.length?(this.width=arguments[0].width||0,this.height=arguments[0].height||0):(this.width=a||0,this.height=b||0)};this.set=function(a,b){return this.width=a||0,this.height=b||0,this},this.get=function(){return{width:this.width,height:this.height}},this.add=function(a,b){return this.width+=a,this.height+=b,this},this.sub=function(a,b){return this.width-=a,this.height-=b,this},this.scale=function(a,b){return this.width*=a,this.height*=b,this},this.getArea=function(){return this.width*this.height},a.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Size2=e,b.util.defineConstant(b.Size2,"VERSION",d)}(window,window.gc),function(a,b,c){"use strict";function d(a,b,c,d){return c*a/d+b}function e(a,b,c,d){return c*(a/=d)*a+b}function f(a,b,c,d){return-c*(a/=d)*(a-2)+b}function g(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function h(a,b,c,d){return c*(a/=d)*a*a+b}function i(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b}function j(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b}function k(a,b,c,d){return c*(a/=d)*a*a*a+b}function l(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b}function m(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b}function n(a,b,c,d){return c*(a/=d)*a*a*a*a+b}function o(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b}function p(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b}function q(a,b,c,d){return 0===a?b:c*Math.pow(2,10*(a/d-1))+b}function r(a,b,c,d){return a===d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b}function s(a,b,c,d){return 0===a?b:a===d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b}function t(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b}function u(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b}function v(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b}function w(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b}function x(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b}function y(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b}function z(a,b,c,d,e){return null==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b}function A(a,b,c,d,e){return null==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b}function B(a,b,c,d,e){return null==e&&(e=1.70158),(a/=d/2)<1?c/2*(a*a*(((e*=1.525)+1)*a-e))+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b}function C(a,b,c,d){var e=1.70158,f=0,g=c;return 0===a?b:1===(a/=d)?b+c:(f||(f=.3*d),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),-(g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*(2*Math.PI)/f))+b)}function D(a,b,c,d){var e=1.70158,f=0,g=c;return 0===a?b:1===(a/=d)?b+c:(f||(f=.3*d),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),g*Math.pow(2,-10*a)*Math.sin((a*d-e)*(2*Math.PI)/f)+c+b)}function E(a,b,c,d){var e=1.70158,f=0,g=c;return 0===a?b:2===(a/=d/2)?b+c:(f||(f=d*(.3*1.5)),g<Math.abs(c)?(g=c,e=f/4):e=f/(2*Math.PI)*Math.asin(c/g),1>a?-.5*(g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*(2*Math.PI)/f))+b:g*Math.pow(2,-10*(a-=1))*Math.sin((a*d-e)*(2*Math.PI)/f)*.5+c+b)}function F(a,b,c,d){return c-G(d-a,0,c,d)+b}function G(a,b,c,d){return(a/=d)<1/2.75?c*(7.5625*a*a)+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}function H(a,b,c,d){return d/2>a?.5*F(2*a,0,c,d)+b:.5*G(2*a-d,0,c,d)+.5*c+b}var I="0.1.0",J={LINEAR:1,IN_QUAD:2,OUT_QUAD:3,INOUT_QUAD:4,IN_CUBIC:5,OUT_CUBIC:6,INOUT_CUBIC:7,IN_QUART:8,OUT_QUART:9,INOUT_QUART:10,IN_QUINT:11,OUT_QUINT:12,INOUT_QUINT:13,IN_EXPO:14,OUT_EXPO:15,INOUT_EXPO:16,IN_CIRC:17,OUT_CIRC:18,INOUT_CIRC:19,IN_SINE:20,OUT_SINE:21,INOUT_SINE:22,IN_BACK:23,OUT_BACK:24,INOUT_BACK:25,IN_ELASTIC:26,OUT_ELASTIC:27,INOUT_ELASTIC:28,IN_BOUNCE:29,OUT_BOUNCE:30,INOUT_BOUNCE:31},K=function(a,c,I,K,L){var M,N=0,O=0,P=1,Q=0,R=100,S=0,T=J.LINEAR,U=0,V=d,W=function(a,c,d,e,f){"undefined"!=typeof a&&(O=a),"undefined"!=typeof c&&(P=c),"undefined"!=typeof d&&(R=d),"undefined"!=typeof e&&this.setEaseType(e),"undefined"!=typeof f&&(U=f),Q=P-O,N=O,S=0,M=new b.Deferred,M.promise(this)};this.update=function(a){return S+=a,R+U>S?S>=U?(N=V(S-U,O,Q,R),M.notify(N)):N=O:(N=P,M.resolve(N)),this},this.begin=function(){return N=O,S=0,M.reset(),this},this.end=function(){return N=P,S=R+U+.1,M.resolve(N),this},this.reverse=function(){var a=O;return O=P,P=a,Q=P-O,M.reset(),this},this.getBegin=function(){return O;
},this.getEnd=function(){return P},this.setValue=function(a,b){return"undefined"!=typeof a&&(O=a),"undefined"!=typeof b&&(P=b),Q=b-a,M.reset(),this},this.getValue=function(){return N},this.setElapsed=function(a){S=a,this.update(0)},this.getElapsed=function(){return S},this.setDuration=function(a){return S=U+(S-U)/R*a,R=R,this},this.getDuration=function(){return R},this.setDelay=function(a){S>U&&(S+=a-U),U=a},this.getDelay=function(){return U},this.setEaseType=function(a){switch(T=a){case J.LINEAR:V=d;break;case J.IN_QUAD:V=e;break;case J.OUT_QUAD:V=f;break;case J.INOUT_QUAD:V=g;break;case J.IN_CUBIC:V=h;break;case J.OUT_CUBIC:V=i;break;case J.INOUT_CUBIC:V=j;break;case J.IN_QUART:V=k;break;case J.OUT_QUART:V=l;break;case J.INOUT_QUART:V=m;break;case J.IN_QUINT:V=n;break;case J.OUT_QUINT:V=o;break;case J.INOUT_QUINT:V=p;break;case J.IN_EXPO:V=q;break;case J.OUT_EXPO:V=r;break;case J.INOUT_EXPO:V=s;break;case J.IN_CIRC:V=t;break;case J.OUT_CIRC:V=u;break;case J.INOUT_CIRC:V=v;break;case J.IN_SINE:V=w;break;case J.OUT_SINE:V=x;break;case J.INOUT_SINE:V=y;break;case J.IN_BACK:V=z;break;case J.OUT_BACK:V=A;break;case J.INOUT_BACK:V=B;break;case J.IN_ELASTIC:V=C;break;case J.OUT_ELASTIC:V=D;break;case J.INOUT_ELASTIC:V=E;break;case J.IN_BOUNCE:V=F;break;case J.OUT_BOUNCE:V=G;break;case J.INOUT_BOUNCE:V=H;break;default:throw new b.exception.WrongSignatureException("ease is not a valid EaseType value")}return this},this.getEaseType=function(){return T},this.hasFinished=function(){return S>=R+U},W.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Easing=K,b.util.defineConstant(b.Easing,"VERSION",I),b.util.defineConstant(b.Easing,"EaseType",J),b.Easing.easeLinear=d,b.Easing.easeInQuad=e,b.Easing.easeOutQuad=f,b.Easing.easeInOutQuad=g,b.Easing.easeInCubic=h,b.Easing.easeOutCubic=i,b.Easing.easeInOutCubic=j,b.Easing.easeInQuart=k,b.Easing.easeOutQuart=l,b.Easing.easeInOutQuart=m,b.Easing.easeInQuint=n,b.Easing.easeOutQuint=o,b.Easing.easeInOutQuint=p,b.Easing.easeInExpo=q,b.Easing.easeOutExpo=r,b.Easing.easeInOutExpo=s,b.Easing.easeInCirc=t,b.Easing.easeOutCirc=u,b.Easing.easeInOutCirc=v,b.Easing.easeInSine=w,b.Easing.easeOutSine=x,b.Easing.easeInOutSine=y,b.Easing.easeInBack=z,b.Easing.easeOutBack=A,b.Easing.easeInOutBack=B,b.Easing.easeInElastic=C,b.Easing.easeOutElastic=D,b.Easing.easeInOutElastic=E,b.Easing.easeInBounce=F,b.Easing.easeOutBounce=G,b.Easing.easeInOutBounce=H}(window,window.gc),function(a,b,c){"use strict";var d="1.0.0",e=function(a,b,c,d,e){this.texture=a,this.offsetX=b,this.offsetY=c,this.width=d,this.height=e,this.centerX=0,this.centerY=0,this.draw=function(a){switch(arguments.length){case 3:a.drawImage(this.texture,this.offsetX,this.offsetY,this.width,this.height,arguments[1]-this.centerX,arguments[2]-this.centerY,this.width,this.height);break;case 5:a.drawImage(this.texture,this.offsetX,this.offsetY,this.width,this.height,arguments[1]-this.centerX*(arguments[3]/this.width),arguments[2]-this.centerY*(arguments[4]/this.height),arguments[3],arguments[4]);break;case 9:a.drawImage(this.texture,this.offsetX+arguments[1],this.offsetY+arguments[2],Math.min(arguments[3],this.width-arguments[1]),Math.min(arguments[4],this.height-arguments[2]),arguments[5]-this.centerX*(arguments[7]/this.width),arguments[6]-this.centerY*(arguments[8]/this.height),arguments[7],arguments[8]);break;default:throw"Incorrect number of parameters"}}};a.gc||(a.gc={},b=a.gc),b.TextureRegion=e,b.util.defineConstant(b.TextureRegion,"VERSION",d)}(window,window.gc),function(a,b,c){"use strict";var d={FORWARDS:0,BACKWARDS:1,RANDOM:2},e=new b.Validator({validators:b.validatorDefinitions.Animation}),f="1.0.0",g={NORMAL:0,REVERSED:1,PINGPONG:2,LOOP:3,LOOP_REVERSED:4,LOOP_PINGPONG:5,LOOP_RANDOM:6},h=function(a,f){var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=function(a,d){var f={playMode:g.LOOP,offsetX:0,offsetY:0,marginX:0,marginY:0,nFrames:0,frameWidth:0,frameHeight:0,frameCenterX:0,frameCenterY:0,frameTime:0,frames:c,onFinish:c,onChangeDirection:c},h=b.util.extend(f,d);if(e.reset().enumerated("playMode",h.playMode,{enumerated:g}).intPositive("offsetX",h.offsetX).intPositive("offsetY",h.offsetY).intPositive("marginX",h.marginX).intPositive("marginY",h.marginY).int("nFrames",h.nFrames).intPositive("frameWidth",h.frameWidth).intPositive("frameHeight",h.frameHeight).int("frameCenterX",h.frameCenterX).int("frameCenterY",h.frameCenterY).intPositive("frameTime",h.frameTime).animationFrameArray("frames",h.frames,{optional:!0}).callback("onFinish",h.onFinish,{optional:!0}).callback("onChangeDirection",h.onChangeDirection,{optional:!0}),e.errors())throw new b.exception.WrongDataException(e.errors());h=e.valid(),x(a,h),this.setPlayMode(h.playMode,!0),h.onFinish?(b.util.isArray(h.onFinish)||(h.onFinish=[h.onFinish]),t=h.onFinish):t=[],h.onChangeDirection?(b.util.isArray(h.onChangeDirection)||(h.onChangeDirection=[h.onChangeDirection]),u=h.onChangeDirection):u=[]},x=function(a,c){var d,e,f=c.offsetX,g=c.offsetY;if(h=a,k=0,i=[],c.frames)for(j=c.frames.length,d=0;j>d;d++)e={src:new b.TextureRegion(h,c.frames[d].x?c.frames[d].x:f,c.frames[d].y?c.frames[d].y:g,c.frames[d].width?c.frames[d].width:c.framesWidth,c.frames[d].height?c.frames[d].height:c.framesHeight),time:c.frames[d].time?c.frames[d].time:c.frameTime},e.src.centerX=c.frames[d].centerX?c.frames[d].centerX:c.frameCenterX,e.src.centerY=c.frames[d].centerY?c.frames[d].centerY:c.frameCenterY,i.push(e),k+=e.time,f+c.frameWidth>=h.width?(f=c.offsetX,g+=c.frameHeight+c.marginY):f+=c.frameWidth+c.marginX;else for(j=c.nFrames<=0?Math.floor(h.width/c.frameWidth):c.nFrames,d=0;j>d;d++)e={src:new b.TextureRegion(h,f,g,c.frameWidth,c.frameHeight),time:c.frameTime},e.src.centerX=c.frameCenterX,e.src.centerY=c.frameCenterY,i.push(e),k+=e.time,f+c.frameWidth>=h.width?(f=c.offsetX,g+=c.frameHeight+c.marginY):f+=c.frameWidth+c.marginX},y=function(a){var b,c;for(b=0,c=a.length;c>b;b++)a[b]()},z=function(){l===j-1?(s=!0,r=!1,y(t)):l++},A=function(){0===l?(s=!0,r=!1,y(t)):l--},B=function(){q===d.FORWARDS?l===j-1&&j>0?(q=d.BACKWARDS,l--):l++:0===l?(s=!0,r=!1,y(t)):l--},C=function(){l=(l+1)%j},D=function(){q===d.FORWARDS?l===j-1&&j>0?(q=d.BACKWARDS,l--):l++:0===l&&j>0?(q=d.FORWARDS,l++):l--},E=function(){0===l?l=j-1:l--},F=function(){l=v.nextInt(j)};this.setPlayMode=function(a,f){if(e.reset().enumerated("playMode",a,{enumerated:g}),e.errors())throw new b.exception.WrongSignatureException("playMode is not a valid gc.Animation.PlayMode");switch(p=a,f&&(s=!1,r=!0,n=0),a!==g.LOOP_RANDOM&&(v=c),a){case g.NORMAL:o=z,f&&(l=0,m=i[l],q=d.FORWARDS);break;case g.REVERSED:o=A,f&&(l=i.length-1,m=i[l],q=d.BACKWARDS);break;case g.PINGPONG:o=B,f&&(l=0,m=i[l],q=d.FORWARDS);break;case g.LOOP:o=C,f&&(l=0,m=i[l],q=d.FORWARDS);break;case g.LOOP_REVERSED:o=E,f&&(l=i.length-1,m=i[l],q=d.BACKWARDS);break;case g.LOOP_PINGPONG:o=D,f&&(l=0,m=i[l],q=d.FORWARDS);break;case g.LOOP_RANDOM:v=new b.RNG,o=F,f&&(l=v.nextInt(j),m=i[l],q=d.RANDOM)}return this},this.update=function(a){if(r){for(n+=a;n>m.time;)n-=m.time,o();m=i[l]}return this},this.getCurrentFrame=function(){return m.src},this.getFrame=function(a){if(a>=0&&j>a)return i[a];throw new b.exception.IndexOutOfBounds},this.isPlaying=function(){return r},this.hasFinished=function(){return s},this.getTotalFrames=function(){return j},this.getTotalTime=function(){return k},this.onFinish=function(a){if(!b.util.isFunction(a))throw new b.exception.WrongSignatureException("callback is not a Function");return t.push(a),this},this.onChangeDirection=function(a){if(!b.util.isFunction(a))throw new b.exception.WrongSignatureException("callback is not a Function");u.push(a)},w.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Animation=h,b.util.defineConstant(b.Animation,"VERSION",f),b.util.defineConstant(b.Animation,"PlayMode",g)}(window,window.gc),function(a,b,c){"use strict";function d(a){var b;m="\\"|a,k=c;for(b in o)h(b,o[b])}function e(){return m}function f(a){n="[ 	]"|a}function g(){return n}function h(a,c){var d=k?k.source:"";if(l.reset().textStyle("options",c),l.errors())throw new b.exception.WrongDataException(l.errors());o[a]=l.valid().options,d=(k?k.source+"|(":"(")+("\\"===m?m+m:m)+a+")",k=new RegExp(d,"g")}function i(a,b){var c,d,e,f,g,h={};if(b||(b="Hg達"),g=a+":"+c,p[g])return p[g];c=document.createElement("span"),c.innerText=b,c.style.font=a,d=document.createElement("div"),d.style.display="inline-block",d.style.width="1px",d.style.height="0",e=document.createElement("div"),e.appendChild(c),e.appendChild(d),f=document.body,f.appendChild(e);try{d.style.verticalAlign="baseline",h.ascent=d.offsetTop-c.offsetTop,d.style.verticalAlign="bottom",h.height=d.offsetTop-c.offsetTop,h.descent=h.height-h.ascent}finally{e.parentNode.removeChild(e)}return p[g]=h,h}function j(a){q=b.util.extend(!0,q,a)}var k,l=new b.Validator({validators:b.validatorDefinitions.Text}),m="\\",n="[ 	]",o={},p={},q={marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,width:0,height:0,limit:-1,delay:0,speed:0,pauseOn:",、.。",pauseLength:1e3,style:{font:"10px sans-serif",fill:!0,fillStyle:"#000000",stroke:!1,strokeStyle:"#000000",lineMargin:0}},r="0.2.1",s=function(a,d,e){function f(){w={fill:!0,stroke:!1,lineMargin:v.style.lineMargin,line:0,token:0,character:0,textMetrics:i(v.style.font),pause:0},t.font=v.style.font,t.fillStyle=v.style.fillStyle,t.strokeStyle=v.style.strokeStyle,t.textBaseline="bottom"}function g(a){var b=o[a];b.font&&(t.font=b.font,w.textMetrics=i(b.font)),b.fillStyle&&(t.fillStyle=b.fillStyle),b.strokeStyle&&(t.strokeStyle=b.strokeStyle),b.lineMargin&&(w.lineMargin=b.lineMargin),typeof b.fill!==c&&(w.fill=b.fill),typeof b.stroke!==c&&(w.stroke=b.stroke),b.pause&&(w.pause+=b.pause)}function h(a){function b(a){var b,c=[],d=0;if(k)for(b=k.exec(a);b;)c.push({txt:a.substring(d,b.index),action:b[0].substring(m.length)}),d=b.index+b[0].length,b=k.exec(a);return d<a.length&&c.push({txt:a.substring(d)}),c}function c(a,b,c,d,e,f){for(var g,h=Math.floor((a.length-1)*(c/b)),i=a.substring(0,h),j=t.measureText(i).width,k=!0;k;)if(c>j)for(g=i+a[h];;){if(j=t.measureText(g).width,j>c){e.splice(d+1,0,i),f.splice(d,0,""),k=!1;break}i=g,g+=a[h++]}else for(;;){if(i=i.substring(0,h-1),j=t.measureText(i).width,c>j){e.splice(d+1,0,i),f.splice(d,0,""),k=!1;break}h--}e.splice(d+2,0,a.substring(i.length)),f.splice(d,0,f[d])}function d(b,d){var f,g,h,i,j=new RegExp(n,"g"),k=b.split(j),m=[],y="",z=o;for(i=j.exec(b);i;)m.push(i[0]),i=j.exec(b);for(i=0;i<k.length;i++)f=k[i],h=m[i]?m[i]:"",g=t.measureText(f).width,g>s?c(f,g,s,i,k,m):r>z+g?(y+=f+h,z+=g+t.measureText(h).width):(l={x:o,txt:y},q[e].push(l),a.splice(e+1,0,b.substring(y.length)),x+=p,q[e].y=x,q.push([]),e++,x+=w.lineMargin,u.width=Math.max(u.width,z-v.marginLeft),y=f+h,o=v.marginLeft,z=o+g+t.measureText(h).width);l={x:o,txt:y,action:d},q[e].push(l),o=z}var e,h,i,j,l,o,p,q=[],r=0!==v.width?v.width-v.marginRight:1/0,s=r-v.marginLeft,x=v.marginTop;for(a=a.split("\n"),f(),p=w.textMetrics.height,u={width:0,height:0},e=0;e<a.length;e++){for(q[e]=[],o=v.marginLeft,i=b(a[e]),h=0,j=i.length;j>h;h++)d(i[h].txt,i[h].action),i[h].action&&(g(i[h].action),p=Math.max(p,w.textMetrics.height));x+=p,q[e].y=x,u.width=Math.max(u.width,o-v.marginLeft)}return u.height=x-v.marginTop,q}function j(){var a,b,c;for(f(),w.line=0,a=s.length;w.line<a;w.line++)for(w.token=0,b=s[w.line].length;w.token<b;w.token++)c=s[w.line][w.token],w.fill&&t.fillText(c.txt,c.x,s[w.line].y),w.stroke&&t.strokeText(c.txt,c.x,s[w.line].y),c.action&&g(c.action)}var p,r,s,t,u,v,w,x=function(a,c,d){var e,g=!d;if(v=b.util.extend({},q,c),l.reset().str("text",a).int("marginTop",v.marginTop).int("marginRight",v.marginRight).int("marginBottom",v.marginBottom).int("marginLeft",v.marginLeft).intPositive("width",v.width).intPositive("height",v.height).int("limit",v.limit).intPositive("delay",v.delay).fltPositive("speed",v.speed).str("pauseOn",v.pauseOn).fltPositive("pauseLength",v.pauseLength).textStyle("style",v.style),l.errors())throw new b.exception.WrongDataException(l.errors());v=l.valid(v),g&&(d=document.createElement("canvas")),t=new b.Canvas2D(d).getContext(),r=a,s=h(a),e=this.getFullTextSize(!0),g&&(d.width=v.width||e.width,v.width=d.width,d.height=v.height||e.height,v.height=d.height),v.marginLeft+v.width+v.marginRight>d.width&&(v.width=d.width-v.marginLeft),v.marginTop+v.height+v.marginBottom>d.height&&(v.height=d.height-v.marginTop),f(),j(),p=new b.Drawable(d),p.drawable(this)};this.getFullTextSize=function(a){var b=u.width,c=u.height;return a&&(b+=v.marginLeft+v.marginRight,c+=v.marginTop+v.marginBottom),{width:Math.ceil(b),height:Math.ceil(c)}},this.getOption=function(a){if("undefined"==typeof v[a])throw new b.exception.WrongDataException("Option "+a+" is not defined");return v[a]},x.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.Text=s,b.util.defineConstant(b.Text,"VERSION",r),b.Text.setEscapeChar=d,b.Text.getEscapeChar=e,b.Text.setWordSplitRegExp=f,b.Text.getWordSplitRegExp=g,b.Text.registerAction=h,b.Text.getTextMetrics=i,b.Text.setDefaultOptions=j}(window,window.gc),function(a,b,c){"use strict";var d=new b.Validator({validators:b.validatorDefinitions.NinePatch}),e="0.1.0",f=function(a,c,e,f,g,h,i,j){var k,l,m,n,o=function(a,c,e,f,g,h,i,j){var o,r={};if(d.reset().ninePatchData("data",a).intPositive("width",c,{optional:!0,def:100}).intPositive("height",e,{optional:!0,def:100}).intPositive("centerX",f,{optional:!0,def:0}).intPositive("centerY",g,{optional:!0,def:0}).intPositive("scaleX",h,{optional:!0,def:1}).intPositive("scaleY",i,{optional:!0,def:1}),d.errors())throw new b.exception.WrongDataException(d.errors());o=d.valid(),m=new b.Point2(o.scaleX,o.scaleY),l=new b.Canvas2D(j).getContext(),j||(l.canvas.width=o.width,l.canvas.height=o.height),n=p(o.data),k=new b.Drawable(l.canvas,o.width,o.height,0,0,o.centerX,o.centerY),k.drawable(r),this.draw=r.draw,this.drawBounds=r.drawBounds,this.drawCenter=r.drawCenter,this.setCenter=r.setCenter,this.getCenter=r.getCenter,this.drawable=r.drawable.bind(this),q()},p=function(a){var c=a.topLeftX+a.topLeftW,d=a.topLeftY+a.topLeftH,e=a.bottomRightX-a.topLeftX-a.topLeftW,f=a.bottomRightY-a.topLeftY-a.topLeftH;return{topLeft:new b.TextureRegion(a.texture,a.topLeftX,a.topLeftY,a.topLeftW,a.topLeftH),top:new b.TextureRegion(a.texture,c,a.topLeftY,e,a.topLeftH),topRight:new b.TextureRegion(a.texture,a.bottomRightX,a.topLeftY,a.bottomRightW,a.topLeftH),left:new b.TextureRegion(a.texture,a.topLeftX,d,a.topLeftW,f),center:new b.TextureRegion(a.texture,c,d,e,f),right:new b.TextureRegion(a.texture,a.bottomRightX,d,a.bottomRightW,f),bottomLeft:new b.TextureRegion(a.texture,a.topLeftX,a.bottomRightY,a.topLeftW,a.bottomRightH),bottom:new b.TextureRegion(a.texture,c,a.bottomRightY,e,a.bottomRightH),bottomRight:new b.TextureRegion(a.texture,a.bottomRightX,a.bottomRightY,a.bottomRightW,a.bottomRightH)}},q=function(){var a=l.canvas.width-n.bottomRight.width,b=l.canvas.height-n.bottomRight.height,c=l.canvas.width-n.topLeft.width-n.bottomRight.width,d=l.canvas.height-n.topLeft.height-n.bottomRight.height;n.topLeft.draw(l,0,0,n.topLeft.width,n.topLeft.height),n.top.draw(l,n.topLeft.width,0,c,n.topLeft.height),n.topRight.draw(l,a,0,n.bottomRight.width,n.topLeft.height),n.left.draw(l,0,n.topLeft.height,n.topLeft.width,d),n.center.draw(l,n.topLeft.width,n.topLeft.height,c,d),n.right.draw(l,a,n.topLeft.height,n.bottomRight.width,d),n.bottomLeft.draw(l,0,b,n.topLeft.width,n.bottomRight.height),n.bottom.draw(l,n.topLeft.width,b,c,n.bottomRight.height),n.bottomRight.draw(l,a,b,n.bottomRight.width,n.bottomRight.height)};this.setSize=function(a,c){if("undefined"==typeof a)throw new b.exception.WrongSignatureException("width is undefined");return"undefined"==typeof c&&(c=a.height,a=a.width),a=Math.max(a,n.topLeft.width+n.bottomRight.width),c=Math.max(c,n.topLeft.height+n.bottomRight.height),l.canvas.width=a,l.canvas.height=c,k.setSize(a,c),q(),this},this.getSize=function(){return{width:l.canvas.width,height:l.canvas.height}},o.apply(this,arguments)};a.gc||(a.gc={},b=a.gc),b.NinePatch=f,b.util.defineConstant(b.NinePatch,"VERSION",e)}(window,window.gc);
//# sourceMappingURL=gc-jslib.min.js.map